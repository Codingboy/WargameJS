<!doctype html>
<html>
	<head>
    		<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
		<script>
            		var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port);
			socket.open();
			socket.on("connect", function(){
				console.log("42");
				socket.emit("communicate", {
	"matchID": 1,
	"senderID": 1,
	"messages":
	[
		{
			"type": "create",
			"data":
			{
				"name": "a unit",
				"id": -1,
				"weapons":
				[
					{
						"name": "a weapon",
						"id": -1
					},
					{
						"name": "another weapon",
						"id": -1
					}
				]
			}
		},
		{
			"type": "create",
			"data":
			{
				"name": "another unit",
				"id": -1
			}
		}
	]
});
				console.log("43");
			});
			socket.on("communicate", function(json){
				console.log("44");
				console.log(json);
				console.log("45");
			});
            socket.on('error', console.error.bind(console));
            socket.on('message', console.log.bind(console));
		</script>
	</head>
	<body>
	</body>
</html>
